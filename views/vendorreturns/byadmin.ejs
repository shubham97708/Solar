<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="/assets/img/favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Users</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- CSS Files -->
    <link href="/assets/css/material-dashboard.css?v=2.1.0" rel="stylesheet" />


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>



</head>

<body class="">
    <div class="wrapper ">
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header card-header-danger">
                                <h4 class="card-title ">Return To Vendor By Admin</h4>
                            </div>
                                        <div class="row">
                                        <div class="col-md-3"  style="margin-left: 10px;" >

                                        <button type="button" class="btn btn-info"  style="margin-left: 10px;" id="addnewrow">
                                            Add New Row
                                        </button></div>
                                        <div class="col-md-3"  >
                                        <button type="button" class="btn btn-danger"   class="col-md-4" id="removerow">
                                            Delete Row
                                        </button>
                                        </div></div>
                                        <tr><%=datas%></tr>
                                    </table>
                                    <form method="POST" action="/vendorreturns/submit">
                                        <table>
                                            <thead class="table">
                                                <tr>
                                                   
                                                    <td>
                                                        <h4 class="card-title ">By Admin</h4>
                                                    </td>
                                                    

                                                </tr>
                                                
                                                <tr>
                                                    <td ><font face='Times New Roman' ><b>Sr. No</b></font></td>
                                                    <td><font face='Times New Roman'><b>Button</b></font></td>
                                                    <td><font face='Times New Roman'><b>IMEI-Number</b></font></td>
                                                    <td><font face='Times New Roman' ><b>Reason</b></font></td>
                                                    <td><font face='Times New Roman' ><b>Brand-Name</b></font></td>
                                                    <td><font face='Times New Roman' ><b>Store-Name</b></font></td>
                                                    <td><font face='Times New Roman'><b>Model-Name</b></font></td>
                                                    <td><font face='Times New Roman' ><b>Model-Number</b></font></td>
                                                    <td><font face='Times New Roman' ><b>Vendor-Name</b></font></td>
                                                    
                                              
                                                    
                                                </tr> 
                                                    


                                            </thead>
                                            <hr color='black' width='100%'>
                                            <tr>
                                                <td>&nbsp;</td>
                                            </tr>
                                            <tbody id="rows">
                                                

                                            </tbody>
                                           

                                            
                                            <tr>
                                                <td>&nbsp;</td>
                                            </tr>
                                            <tr>
                                                <td>&nbsp;</td>
                                                <td>&nbsp;</td>
                                                <td>&nbsp;</td>
                                                <td>&nbsp;</td>
                                                <td><input class="btn btn-success" type="submit" value="Submit"></td>
                                            </tr>

                                        </table>


                                    </form>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container-fluid">
                <div class="copyright float-right">
                    &copy;
                    &nbsp;Devloped By SHUBHAM SONI
                </div>
            </div>
        </footer>
    </div>
    <!--   Core JS Files   -->
    <script src="/assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="/assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
    <!-- Chartist JS -->
    <script src="/assets/js/plugins/chartist.min.js"></script>
    <!--  Notifications Plugin    -->
    <script src="/assets/js/plugins/bootstrap-notify.js"></script>
    <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="/assets/js/material-dashboard.min.js?v=2.1.0" type="text/javascript"></script>
    <!-- Material Dashboard DEMO methods, don't include it in your project! -->
    <script src="/assets/demo/demo.js"></script>

    <script>
        //-----------for fill mobile --------------

        var totalrows = 0;

        function newrow() {
            totalrows++;
            $('#totalrows').val(totalrows);
            return (
                `<tr id="row${totalrows}">
            <td>
                ${totalrows}
            </td>
            <td>
                <input  class="btn btn-info" type="button"  onclick="myclick(${totalrows})" value="Get" >
            </td>
            <td>
                <input class="form-control" required id="imeimob${totalrows}" type="text" name="imeimob" placeholder="Enter IMEI/Serial"  >
            </td>
            <td>
                <input class="form-control" required   type="text" id="reason${totalrows}" name="reason" placeholder="Reason"  >
                           
            </td>
            <td>
                <input class="form-control" required type="text" id="brandname${totalrows}" name="brandname" placeholder="Brand Name"  >
                
            </td>
            
            <td>
                <input class="form-control" required  type="text" id="storename${totalrows}" name="storename" placeholder="Store-Name"  >
                
            </td>
            <td>
                <input class="form-control" required type="text" id="modelname${totalrows}" name="modelname" placeholder="Model Name"  >            
            </td>
            <td>
                <input class="form-control" required type="text" id="modelno${totalrows}" name="modelno" placeholder="Model No."  >
            </td>
            <td>
                <input class="form-control"  required type="text" id="vendorname${totalrows}" name="vendorname" placeholder="Vendor-Name"  >
            </td>
           
            
                         
        </tr>`
            );
        }

        $('#addnewrow').click(() => {
            $('#rows').append(newrow())
        });


        $('#removerow').click(() => {
            $(`#row${totalrows}`).remove();
            totalrows--;
            $('#totalrows').val(totalrows);
        });

        function myclick(btns) {
            //alert(btns);
            const imeimob = $(`#imeimob${btns}`).val();
           
            $.post("/vendorreturns/filldatabyimeino", {
                    imeimob:imeimob
                  
                },
                function (data) {console.log("Congratulations ",data)
               // alert(data.data.storename)
               var a=`Currently this product is available on ${data.data.storename} Store`
                    // if (data.data.storeid == null && data.data.storename == null) {
                    //     console.log("Product Not Found")
                    //     alert("Product Not Found");}
                 if (data.data.imeino=='' && data.data.color=='' && data.data.storename=='') {
                        console.log("Product Not Found")
                        alert("Product Not Found");
                    } 

                    // else if (data.data.storeid == 0 && data.data.storename == 'Sold') {
                    //     console.log("Product Is SOLD")
                    //     alert("Product Is SOLD");
                    // } 
                    else if (data.data.storeid == 0 && data.data.storename == 'Returned') {
                        console.log("Product Is Already Returned")
                        alert("Product Is Already Returned");
                    } 
                    else if (data.data.storeid != 0 && data.data.storename != 'Returned' && data.data.storename != 'Sold') {
                        console.log("Product Is Already Returned")
                        alert(a);
                    } 


                    else if (data.data.storeid == 0 && data.data.storename != 'Sold'){
                                      
                        $(`#brandname${btns}`).val(data.data.brandname);
                        $(`#brandid${btns}`).val(data.data.brandid);
                        $(`#storename${btns}`).val(data.data.storename);
                        $(`#storeid${btns}`).val(data.data.storeid);
                        $(`#modelid${btns}`).val(data.data.modelid);
                        $(`#modelname${btns}`).val(data.data.modelname);
                        $(`#modelno${btns}`).val(data.data.modelno);
                        $(`#vendorid${btns}`).val(data.data.vendorid);
                        $(`#vendorname${btns}`).val(data.data.vendorname);
    
                    }
                    else if(data.data == false)
                    {
                        alert("congratulations")
                    }
                    //console.log(data.feedstock[0].id)
                    //alert("Data: " + data + "\nStatus: " + status);                  
            });
    }




        // Get Product  On Click       
     /*    $(document).ready(function () {
            $("#getmobile").click(function () {
                const imeimob = $('#imeimob').val();
                const storeid = $('#storeid').val();
                $.post("getmobile", {
                        imeimob,
                        storeid
                    },
                    function (data, status) {
                        console.log(data)

                        if (data.feedstock[0].storeid == null && data.feedstock[0].storename ==
                            null) {
                            alert("Product Not Found");
                        } else if (data.feedstock[0].storeid == 0 && data.feedstock[0].storename ==
                            "SOLD") {
                            alert("Product Is SOLD");
                        } else if (data.feedstock[0].storeid == null && data.feedstock[0]
                            .storename != null) {
                            alert("Currently Product Is Not Present At your Store\nPlease Contact\n" +
                                data.feedstock[0].storename);
                        }
                        
                       
                        
                        else {
                            $("#color").val(data.feedstock[0].color);
                            $("#price").val(data.feedstock[0].price);
                            $("#brandname").val(data.brand[0].name);
                            $("#brandid").val(data.feedstock[0].brandid);
                            $("#modelid").val(data.feedstock[0].modelid);
                            $("#modelname").val(data.model[0].name);
                            $("#modelno").val(data.model[0].modelno);
                            $("#ptype").val(data.categories[0].name);
                            $("#gstpercent").val(data.categories[0].percentage);
                            $("#hsnmobile").val(data.categories[0].hsn);
                            $("#categoriesid").val(data.categories[0].id);

                        }

                        //console.log(data.feedstock[0].id)
                        //alert("Data: " + data + "\nStatus: " + status);                  
                    });
            });
        });
 */

  





        // Get Cutomer by Card On Click
     






        // Get Cutomer By Mobile On Click
     


        // Genrate Bill

        /*
        $(document).ready(function(){
                     $("#genratebill").click(function(){
                        const gstoreid = $('#storeid').val();
                        const gstorename = $('#storename').val();
                        const gstoreaddress = $('#storeaddress').val();
                        const gstoregstno = $('#storegstno').val();
                        const gbrandid = $('#brandid').val();
                        const gmodelid = $('#modelid').val();
                        const gcategoriesid = $('#categoriesid').val();
                        const gimeino = $('#imeimob').val();
                        const gmobileno = $('#cmobile').val();
                        const gproducttype = $('#ptype').val();
                        const gbrandname = $('#brandname').val();
                        const gcolor = $('#color').val();
                        const gmodelname = $('#modelname').val();
                        const gmodelno = $('#modelno').val();
                        const ghsn = $('#hsnmoble').val();
                        const ggstpercent = $('#gstpercent').val();
                        const gprice = $('#price').val();
                        const gqty = $('#qty').val();
                        const gcustomername = $('#cname').val();
                        const gcustomeradd = $('#cadd').val();
                        const ggstin = $('#cgstno').val();
                        const gpaytype = $('#paytype').val();
                        const gfcname = $('#fcname').val();


                       
                       
                        
                        $.post("sold",
                        {
                            gstoreid,gstorename,gstoreaddress,gstoregstno,gbrandid,gmodelid,gcategoriesid,gimeino,gmobileno,gproducttype,
                             gbrandname,gcolor,gmodelname,gmodelno,ghsn,ggstpercent,gprice,gqty,gcustomername,gcustomeradd,ggstin,gpaytype,gfcname  
                       
                        },
                        function(data,status){
                            if(data=="Server Error")
                            {
                                alert("Server Error");
                            }
                            else if(data=="Customer Not Exist")
                            {
                                alert("Customer Not Exist");                                          
                            }
                            else {
                            $("#cname").val(data[0].name);
                            $("#cadd").val(data[0].address);
                            $("#cgstno").val(data[0].cgstno); 
                            }  
                            alert(data)               
                        });
                      });
                    });
        */



















        /*
        function myFunction() {
          window.print();
        }
        */
    </script>

</body>

</html>
                                       